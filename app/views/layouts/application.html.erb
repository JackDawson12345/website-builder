<!DOCTYPE html>
<html>
<head>
  <title>Website Builder</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen">
<% if user_signed_in? %>
  <nav class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <%= link_to "Website Builder", root_path, class: "text-xl font-bold text-gray-900" %>
        </div>

        <div class="flex items-center space-x-4">
          <% if current_user.admin? %>
            <%= link_to "Components", admin_components_path, class: "text-gray-600 hover:text-gray-900" %>
            <%= link_to "Themes", admin_themes_path, class: "text-gray-600 hover:text-gray-900" %>
            <%= link_to "Dashboard", admin_root_path, class: "text-gray-600 hover:text-gray-900" %>
          <% else %>
            <%= link_to "My Website", customer_website_path, class: "text-gray-600 hover:text-gray-900" %>
            <%= link_to "Dashboard", customer_root_path, class: "text-gray-600 hover:text-gray-900" %>
          <% end %>

          <div class="relative">
            <span class="text-gray-600"><%= current_user.email %></span>
            <%= button_to "Sign Out", destroy_user_session_path,
                          method: :delete,
                          class: "ml-3 text-red-600 hover:text-red-800 bg-transparent border-0 p-0 cursor-pointer",
                          form_class: "inline" %>
          </div>
        </div>
      </div>
    </div>
  </nav>
<% end %>

<main class="flex-1">
  <% if notice %>
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mx-4 mt-4">
      <%= notice %>
    </div>
  <% end %>

  <% if alert %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-4 mt-4">
      <%= alert %>
    </div>
  <% end %>

  <%= yield %>
</main>
</body>
</html>